{% extends "ltr/shop-manager/base.html" %}
{% load static %}
{% load mathfilters %}

<!------------------------------- title ---------------------------------------------------->
<!-- english & frensh version -->
{% block title %}
<title>
{% if lang == 'en' %}
         Show Product - Dexunt Shop Management
{% endif %}
{% if lang == 'fr' %}
         Visualiser un Produit - Dexunt Gestion de Magasin
{% endif %}
</title>
{% endblock %}
<!------------------------------- end title ------------------------------------------------>

<!------------------------------- side menu ------------------------------------------------>
<!-- english & frensh version -->
{% block side_menu %}
<div id="kt_aside_menu" class="menu menu-rounded menu-column menu-active-bg menu-title-gray-600 menu-icon-gray-400 menu-state-primary menu-arrow-gray-500 fw-semibold fs-6 my-auto" data-kt-menu="true">
    {% if lang == 'en' %}
    <!--menu title dashboard-->
    <div class="menu-item py-2">
        <a class="menu-link menu-center" href="{% url 'dashboard' 'en' %}" title="Dashboard" data-bs-toggle="tooltip" data-bs-trigger="hover" data-bs-dismiss="click" data-bs-placement="right">
            <span class="menu-icon me-0">
                <!--dashboard icon-->
                <span class="menu-link menu-center">
                    <span class="menu-icon me-0">
                        <i class="bi bi-grid" style="font-size: 2rem;"></i>
                    </span>
                </span>
                <!--end dashboard icon-->
            </span>
        </a>
    </div>
    <!--end menu title dashboard-->

    <!--menu title user management-->
    <div class="menu-item py-2">
        <a class="menu-link menu-center" href="{% url 'dashboard' 'en' %}" title="User Management" data-bs-toggle="tooltip" data-bs-trigger="hover" data-bs-dismiss="click" data-bs-placement="right">
            <span class="menu-icon me-0">
                <!--user management icon-->
                <span class="menu-link menu-center">
                    <span class="menu-icon me-0">
                        <i class="bi bi-people" style="font-size: 2rem;"></i>
                    </span>
                </span>
                <!--end user management icon-->
            </span>
        </a>
    </div>
    <!--end menu title user management-->

    <!--menu title inventory-->
    <div class="menu-item py-2">
        <a class="menu-link active menu-center" href="{% url 'dashboard' 'en' %}" title="Inventory" data-bs-toggle="tooltip" data-bs-trigger="hover" data-bs-dismiss="click" data-bs-placement="right">
            <span class="menu-icon me-0">
                <!--inventory icon-->
                <span class="menu-link menu-center">
                    <span class="menu-icon me-0">
                        <i class="bi bi-box-seam" style="font-size: 2rem;"></i>
                    </span>
                </span>
                <!--end inventory icon-->
            </span>
        </a>
    </div>
    <!--end menu title inventory-->

    <!--menu title e-shop-->
    <div class="menu-item py-2">
        <a class="menu-link menu-center" href="{% url 'dashboard' 'en' %}" title="E-Shop" data-bs-toggle="tooltip" data-bs-trigger="hover" data-bs-dismiss="click" data-bs-placement="right">
            <span class="menu-icon me-0">
                <!--e-shop icon-->
                <span class="menu-link menu-center">
                    <span class="menu-icon me-0">
                        <i class="bi bi-cart" style="font-size: 2rem;"></i>
                    </span>
                </span>
                <!--end e-shop icon-->
            </span>
        </a>
    </div>
    <!--end menu title e-shop-->

    <!--menu title cash management-->
    <div class="menu-item py-2">
        <a class="menu-link menu-center" href="{% url 'dashboard' 'en' %}" title="Cash Management" data-bs-toggle="tooltip" data-bs-trigger="hover" data-bs-dismiss="click" data-bs-placement="right">
            <span class="menu-icon me-0">
                <!--cash management icon-->
                <span class="menu-link menu-center">
                    <span class="menu-icon me-0">
                        <i class="bi bi-cash-stack" style="font-size: 2rem;"></i>
                    </span>
                </span>
                <!--end cash management icon-->
            </span>
        </a>
    </div>
    <!--end menu title cash management-->
    {% endif %}

    {% if lang == 'fr' %}
    <!--menu title dashboard-->
    <div class="menu-item py-2">
        <a class="menu-link menu-center" href="{% url 'dashboard' 'en' %}" title="Tableau de Bord" data-bs-toggle="tooltip" data-bs-trigger="hover" data-bs-dismiss="click" data-bs-placement="right">
            <span class="menu-icon me-0">
                <!--dashboard icon-->
                <span class="menu-link menu-center">
                    <span class="menu-icon me-0">
                        <i class="bi bi-grid" style="font-size: 2rem;"></i>
                    </span>
                </span>
                <!--end dashboard icon-->
            </span>
        </a>
    </div>
    <!--end menu title dashboard-->

    <!--menu title user management-->
    <div class="menu-item py-2">
        <a class="menu-link menu-center" href="{% url 'dashboard' 'en' %}" title="Gestion des utilisateurs" data-bs-toggle="tooltip" data-bs-trigger="hover" data-bs-dismiss="click" data-bs-placement="right">
            <span class="menu-icon me-0">
                <!--user management icon-->
                <span class="menu-link menu-center">
                    <span class="menu-icon me-0">
                        <i class="bi bi-people" style="font-size: 2rem;"></i>
                    </span>
                </span>
                <!--end user management icon-->
            </span>
        </a>
    </div>
    <!--end menu title user management-->

    <!--menu title inventory-->
    <div class="menu-item py-2">
        <a class="menu-link active menu-center" href="{% url 'dashboard' 'en' %}" title="Inventaire" data-bs-toggle="tooltip" data-bs-trigger="hover" data-bs-dismiss="click" data-bs-placement="right">
            <span class="menu-icon me-0">
                <!--inventory icon-->
                <span class="menu-link menu-center">
                    <span class="menu-icon me-0">
                        <i class="bi bi-box-seam" style="font-size: 2rem;"></i>
                    </span>
                </span>
                <!--end inventory icon-->
            </span>
        </a>
    </div>
    <!--end menu title inventory-->

    <!--menu title e-shop-->
    <div class="menu-item py-2">
        <a class="menu-link menu-center" href="{% url 'dashboard' 'en' %}" title="Boutique en Ligne" data-bs-toggle="tooltip" data-bs-trigger="hover" data-bs-dismiss="click" data-bs-placement="right">
            <span class="menu-icon me-0">
                <!--e-shop icon-->
                <span class="menu-link menu-center">
                    <span class="menu-icon me-0">
                        <i class="bi bi-cart" style="font-size: 2rem;"></i>
                    </span>
                </span>
                <!--end e-shop icon-->
            </span>
        </a>
    </div>
    <!--end menu title e-shop-->

    <!--menu title cash management-->
    <div class="menu-item py-2">
        <a class="menu-link menu-center" href="{% url 'dashboard' 'en' %}" title="Gestion de la TrÃ©sorerie" data-bs-toggle="tooltip" data-bs-trigger="hover" data-bs-dismiss="click" data-bs-placement="right">
            <span class="menu-icon me-0">
                <!--cash management icon-->
                <span class="menu-link menu-center">
                    <span class="menu-icon me-0">
                        <i class="bi bi-cash-stack" style="font-size: 2rem;"></i>
                    </span>
                </span>
                <!--end cash management icon-->
            </span>
        </a>
    </div>
    <!--end menu title cash management-->
    {% endif %}
</div>
{% endblock %}
<!------------------------------- end side menu -------------------------------------------->

<!------------------------------- breadcrumb ----------------------------------------------->
<!-- english & frensh version -->
{% block breadcrumb %}
<!--breadcrumb-->
<ul class="breadcrumb fw-semibold fs-base my-1">
    {% if lang == 'en' %}
    <li class="breadcrumb-item text-muted">
        <a href="{% url 'dashboard' 'en_dashboard' %}" class="text-muted">Home</a>
    </li>
    <li class="breadcrumb-item text-muted">
        <a href="{% url 'inventory' 'en_product_list_show' %}" class="text-muted">Inventory</a>
    </li>
    <li class="breadcrumb-item text-muted">View Product</li>
    {% endif %}

    {% if lang == 'fr' %}
    <li class="breadcrumb-item text-muted">
        <a href="{% url 'dashboard' 'fr_dashboard' %}" class="text-muted">Home</a>
    </li>
    <li class="breadcrumb-item text-muted">
        <a href="{% url 'inventory' 'fr_product_list_show' %}" class="text-muted">Inventory</a>
    </li>
    <li class="breadcrumb-item text-muted">View Product</li>
    {% endif %}
</ul>
<!--end breadcrumb-->
{% endblock %}
<!------------------------------- end breadcrumb ------------------------------------------->

<!------------------------------- show product --------------------------------------------->
<!-- english & frensh version -->


{% block content %}
<div class="container-xxl" id="kt_content_container">
    {% if lang == 'en' %}
    <!--header menu-->
    <div class="card mb-5 mb-xl-10">
        <div class="card-body pt-9 pb-0">
            <div class="d-flex flex-wrap flex-sm-nowrap mb-3">
                <!--product thumbnail-->
                <div class="me-7 mb-4">
                    <div class="symbol symbol-100px symbol-lg-160px symbol-fixed position-relative">
                        <img src="{% get_media_prefix %}{{product_to_view.thumb}}" />
                    </div>
                </div>
                <!--end product thumbnail-->

                <div class="flex-grow-1">
                    <div class="d-flex justify-content-between align-items-start flex-wrap mb-2">

                        <div class="d-flex flex-column">
                            <!--product name & state-->
                            <div class="d-flex align-items-center mb-2">
                                <h4 class="text-gray-900 text-hover-primary fs-2 fw-bold me-1">{{ product_to_view.product_name }}</h4>
                                <a href="overview.html#" class="btn btn-sm btn-light-success fw-bold ms-2 fs-8 py-1 px-3" data-bs-toggle="modal" data-bs-target="#kt_modal_upgrade_plan">Upgrade to Pro</a>
                            </div>
                            <!--end product name & state-->

                            <!--product general information-->
                            <div class="d-flex flex-wrap fw-semibold fs-6 mb-4 pe-2">
                                <!--product upc-->
                                <a class="d-flex align-items-center text-gray-400 text-hover-primary me-5 mb-2">
                                    <i class="bi bi-upc" style="margin-right: 5px;font-size: 2rem;"></i>
                                    {{ product_to_view.upc }}
                                </a>
                                <!--end product upc-->
                                <!--product quantity-->
                                <a class="d-flex align-items-center text-gray-400 text-hover-primary me-5 mb-2">
                                    <i class="bi bi-stack" style="margin-right: 5px;font-size: 2rem;"></i>
                                    {{ product_to_view.quantity }}
                                </a>
                                <!--end product quantity-->
                                <!--product buy price-->
                                <a class="d-flex align-items-center text-gray-400 text-hover-primary mb-2">
                                    <i class="bi bi-cash" style="margin-right: 5px;font-size: 2rem;"></i>
                                    {{ product_to_view.buy_price }}
                                </a>
                                <!--end product buy price-->
                            </div>
                            <!--end product general information-->
                        </div>

                        <div class="d-flex my-4">
                            <!--actions menu-->
                            <div class="me-0">
                                <!--action buttons menu-->
                                <button class="btn btn-sm btn-icon btn-bg-light btn-active-color-primary" data-kt-menu-trigger="click" data-kt-menu-placement="bottom-end">
                                    <i class="bi bi-clipboard-plus" style="margin-right: 5px;font-size: 3rem;"></i>
                                </button>
                                <!--end action buttons menu-->

                                <!--action buttons-->
                                <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-800 menu-state-bg-light-primary fw-semibold w-200px py-3" data-kt-menu="true">
                                    <!--actions menu title-->
                                    <div class="menu-item px-3">
                                        <div class="menu-content text-muted pb-2 px-3 fs-7 text-uppercase">Add Features</div>
                                    </div>
                                    <!--end actions menu title-->

                                    <!--actions menu item photo-->
                                    <div class="menu-item px-3" data-bs-toggle="modal" data-bs-target="#kt_modal_add_photo">
                                        <a href="#" class="menu-link px-3">Photo</a>
                                    </div>
                                    <!--end actions menu item photo-->

                                    <!--actions menu item details in english-->
                                    <div class="menu-item px-3" data-bs-toggle="modal" data-bs-target="#kt_modal_en_details">
                                        <a href="#" class="menu-link px-3">Details in English</a>
                                    </div>
                                    <!--end actions menu item details in english-->

                                    <!--actions menu item details in frensh-->
                                    <div class="menu-item px-3" data-bs-toggle="modal" data-bs-target="#kt_modal_fr_details">
                                        <a href="#" class="menu-link px-3">Details in Frensh</a>
                                    </div>
                                    <!--end actions menu item details in frensh-->

                                    <!--actions menu item details in arabic-->
                                    <div class="menu-item px-3" data-bs-toggle="modal" data-bs-target="#kt_modal_ar_details">
                                        <a href="#" class="menu-link px-3">Details in Arabic</a>
                                    </div>
                                    <!--end actions menu item details in arabic-->
                                </div>
                                <!--end action buttons-->
                            </div>
                            <!--end actions menu-->
                        </div>
                    </div>

                    <!--add new photo modal-->
                    <div class="modal fade" tabindex="-1" id="kt_modal_add_photo">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <!-- modal title -->
                                <div class="modal-header">
                                    <h3 class="modal-title">Add new photo</h3>
                                    <div class="btn btn-icon btn-sm btn-active-light-primary ms-2" data-bs-dismiss="modal" aria-label="Close">
                                        <i class="bi bi-x-lg"></i>
                                    </div>
                                </div>
                                <!-- modal title -->

                                <!--add new image form-->
                                <form action="{% url 'view-product' 'en_product_image_add' product_to_view.sku %}" class="form d-flex flex-column flex-lg-row fv-plugins-bootstrap5 fv-plugins-framework" method="post" enctype="multipart/form-data">
                                    {% csrf_token %}
                                    <div class="modal-body">
                                        <div class="image-input image-input-empty" data-kt-image-input="true" style="background-image: url({% static 'manager/media/svg/avatars/blank-dark.svg' %})">
                                            <div class="image-input-wrapper w-125px h-125px"></div>
                                            <label class="btn btn-icon btn-circle btn-color-muted btn-active-color-primary w-25px h-25px bg-body shadow" data-kt-image-input-action="change" data-bs-toggle="tooltip" data-bs-dismiss="click" title="Change avatar">
                                                <i class="bi bi-pencil-fill fs-7"></i>
                                                <input type="file" name="image_to_add" accept=".png, .jpg, .jpeg" />
                                                <input type="hidden" name="image_to_add_remove" />
                                            </label>
                                            <span class="btn btn-icon btn-circle btn-color-muted btn-active-color-primary w-25px h-25px bg-body shadow" data-kt-image-input-action="cancel" data-bs-toggle="tooltip" data-bs-dismiss="click" title="Cancel avatar">
                                                <i class="bi bi-x fs-2"></i>
                                            </span>
                                            <span class="btn btn-icon btn-circle btn-color-muted btn-active-color-primary w-25px h-25px bg-body shadow" data-kt-image-input-action="remove" data-bs-toggle="tooltip" data-bs-dismiss="click" title="Remove avatar">
                                                <i class="bi bi-x fs-2"></i>
                                            </span>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-light" data-bs-dismiss="modal">Close</button>
                                        <button type="submit" class="btn btn-primary">Save image</button>
                                    </div>
                                </form>
                                <!--end add new image form-->

                            </div>
                        </div>
                    </div>
                    <!--end add new photo modal-->

                    <!--details modal-->
                    <div class="modal fade" tabindex="-1" id="kt_modal_en_details">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <!-- modal title -->
                                <div class="modal-header">
                                    <h3 class="modal-title">Add new detail</h3>
                                    <div class="text-muted fs-7">The details need to be written in English.</div>
                                    <div class="btn btn-icon btn-sm btn-active-light-primary ms-2" data-bs-dismiss="modal" aria-label="Close">
                                        <i class="bi bi-x-lg"></i>
                                    </div>
                                </div>
                                <!-- modal title -->

                                <!--add new image form-->
                                <form action="{% url 'view-product' 'en_product_detail_add' product_to_view.sku %}" class="form d-flex flex-column flex-lg-row fv-plugins-bootstrap5 fv-plugins-framework" method="post" enctype="multipart/form-data">
                                    {% csrf_token %}
                                    <div class="modal-body">

                                        <!--description-->
                                        <div class="text-muted fs-7">Make sure than the entry you are creating doesn't exist.</div>
                                        <!--end description-->


                                        <label class="form-label">Put the value of the feature</label>
                                        <input type="text" class="form-control" id="kt_docs_maxlength_threshold" maxlength="60" required/>
                                        <span class="fs-6 text-muted">Set threshold value to show there are 60 chars or less left</span>



                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-light" data-bs-dismiss="modal">Close</button>
                                        <button type="submit" class="btn btn-primary">Save detail</button>
                                    </div>
                                </form>
                                <!--end add new image form-->

                            </div>
                        </div>
                    </div>
                    <!--end details modal-->

                    <!--actions profile completion-->
                    <div class="d-flex flex-wrap flex-stack">
                        <div class="d-flex align-items-center w-200px w-sm-300px flex-column mt-3">
                            <div class="d-flex justify-content-between w-100 mt-auto mb-2">
                                <span class="fw-semibold fs-6 text-gray-400">Profile Completion</span>
                                <span class="fw-bold fs-6">{{product_to_view.profile|mul:10}}%</span>
                            </div>
                            <div class="h-5px mx-3 w-100 bg-light mb-3">
                                <div class="bg-success rounded h-5px" role="progressbar" style="width: {{product_to_view.profile|mul:10}}%;" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                        </div>
                    </div>
                    <!--end actions profile completion-->
                </div>
            </div>
        </div>
    </div>
    <!--end header menu-->

    {% if photos_count > 0 %}
    <!--photos list-->
    <div class="card mb-5 mb-xl-10" id="kt_profile_details_view">
        <div class="card-header cursor-pointer">
            <div class="card-title m-0">
                <h3 class="fw-bold m-0">Product Photos</h3>
            </div>
        </div>
        <div class="card-body p-9">
            <div class="tns tns-default">
                <div data-tns="true" data-tns-loop="true" data-tns-swipe-angle="false" data-tns-speed="2000" data-tns-autoplay="true" data-tns-autoplay-timeout="18000" data-tns-controls="true" data-tns-nav="false" data-tns-items="3" data-tns-center="false" data-tns-dots="false" data-tns-prev-button="#kt_team_slider_prev1" data-tns-next-button="#kt_team_slider_next1">
                    {% for photo in photos %}
                    <div class="text-center px-5 py-5">
                        <!--product photos-->
                        <img src="{% get_media_prefix %}{{photo.picture}}" class="card-rounded shadow mw-100" style="margin-bottom: 20px;" />
                        <!--end product photos-->

                        <!--delete photo icon-->
                        <a href="{% url 'delete-option' 'en_product_image_delete' product_to_view.sku photo.id %}" class="btn btn-sm btn-light btn-active-light-primary" data-bs-trigger="hover" data-bs-dismiss="click" data-bs-toggle="popover" data-bs-placement="top" data-bs-content="delete image">
                            <i class="bi bi-trash"></i>
                        </a>
                        <!--end delete photo icon-->
                    </div>
                    {% endfor %}
                </div>
                {% if photos_count > 3 %}
                <!--slider buttons-->
                <button class="btn btn-icon btn-active-color-primary" id="kt_team_slider_prev1">
                    <i class="bi bi-chevron-compact-left" style="font-size: 2rem;"></i>
                </button>
                <button class="btn btn-icon btn-active-color-primary" id="kt_team_slider_next1">
                    <i class="bi bi-chevron-compact-right" style="font-size: 2rem;"></i>
                </button>
                <!--end slider buttons-->
                {% endif %}
            </div>
        </div>
    </div>
    <!--end photos list-->
    {% endif %}

    {% if features_count > 0 %}
    <!--products features table-->
    <div class="card mb-5 mb-xl-10">
        <div class="card-header cursor-pointer">
            <div class="card-title m-0">
                <h3 class="fw-bold m-0">Product Details</h3>
            </div>
        </div>
        <div class="card-body p-9">
            <div class="py-5">
                <div class="table-responsive">
                    <table class="table table-row-dashed table-row-gray-300 gy-7">
                        <thead>
                        <tr class="fw-bold fs-6 text-gray-800">
                            <th>Features</th>
                            <th>Language</th>
                            <th>Value</th>
                            <th></th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for feature in features %}
                        <tr>
                            <td>{{ feature.type }}</td>
                            <td>{{ feature.language }}</td>
                            <td>{{ feature.value }}</td>
                            <td>
                                <a href="#" class="btn btn-sm btn-light btn-active-light-primary" data-bs-trigger="hover" data-bs-dismiss="click" data-bs-toggle="popover" data-bs-placement="top" data-bs-content="delete product">
                                    <i class="bi bi-trash"></i>
                                </a>
                            </td>
                        </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="notice d-flex bg-light-warning rounded border-warning border border-dashed p-6">
                <span class="svg-icon svg-icon-2tx svg-icon-warning me-4">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect opacity="0.3" x="2" y="2" width="20" height="20" rx="10" fill="currentColor" />
                        <rect x="11" y="14" width="7" height="2" rx="1" transform="rotate(-90 11 14)" fill="currentColor" />
                        <rect x="11" y="17" width="2" height="2" rx="1" transform="rotate(-90 11 17)" fill="currentColor" />
                    </svg>
                </span>
                <div class="d-flex flex-stack flex-grow-1">
                    <div class="fw-semibold">
                        <h4 class="text-gray-900 fw-bold">We need your attention!</h4>
                        <div class="fs-6 text-gray-700">Your payment was declined. To start using tools, please
                            <a class="fw-bold" href="billing.html">Add Payment Method</a>.</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--end products features table-->
    {% endif %}
    {% endif %}

    {% if lang == 'fr' %}

    {% endif %}
</div>
{% endblock %}
<!------------------------------- end show product ----------------------------------------->